{"version":3,"sources":["../src/roslib.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","module","undefined","isArray","Array","_isArray","obj","Object","prototype","toString","defaultMaxListeners","init","_events","_conf","configure","conf","delimiter","maxListeners","wildcard","newListener","verboseMemoryLeak","listenerTree","logPossibleMemoryLeak","count","eventName","errorMsg","console","error","trace","EventEmitter","EventEmitter2","searchListenerTree","handlers","type","tree","listeners","leaf","len","branch","xTree","xxTree","isolatedBranch","endReached","typeLength","currentType","nextType","_listeners","push","hasOwnProperty","concat","growListenerTree","listener","split","slice","name","shift","warned","setMaxListeners","event","once","fn","many","ttl","self","off","apply","arguments","_origin","on","emit","al","args","j","handler","_all","ns","emitAsync","Promise","resolve","promises","reject","all","onAny","addListener","leafs","iLeaf","position","splice","recursivelyGarbageCollect","root","keys","key","Function","offAny","fns","removeListener","removeAllListeners","listenerCount","listenersAny","define","amd","window","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","toObject","val","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","order2","map","join","test3","forEach","letter","err","target","source","from","to","symbols","ROSLIB","REVISION","global","Topic","Message","ActionClient","options","that","ros","serverName","actionName","timeout","omitFeedback","omitStatus","omitResult","goals","receivedStatus","feedbackListener","messageType","statusListener","resultListener","goalTopic","cancelTopic","advertise","subscribe","statusMessage","status_list","status","goal","goal_id","id","feedbackMessage","feedback","resultMessage","result","setTimeout","__proto__","cancel","cancelMessage","publish","dispose","unadvertise","unsubscribe","ActionListener","goalListener","goalMessage","Goal","actionClient","isFinished","date","Date","goalID","Math","random","getTime","stamp","secs","nsecs","send","SimpleActionServer","feedbackPublisher","statusPublisher","resultPublisher","cancelListener","header","frame_id","currentGoal","nextGoal","isEarlier","t1","t2","statusInterval","setInterval","currentTime","floor","round","setSucceeded","result2","sendFeedback","feedback2","setPreempted","Ros","mixin","action","values","Service","ServiceRequest","Param","get","callback","paramClient","serviceType","request","callService","value","JSON","parse","set","stringify","delete","WebSocket","socketAdapter","socket","idCounter","isConnected","transportLibrary","transportOptions","groovyCompatibility","url","connect","io","onopen","onmessage","onclose","onerror","constructor","createDataChannel","close","authenticate","mac","client","dest","rand","level","end","auth","op","callOnConnection","message","messageJson","emitter","msg","setStatusLevel","levelMsg","getActionServers","failedCallback","action_servers","getTopics","topicsClient","getTopicsForType","topicType","topicsForTypeClient","topics","getServices","servicesClient","services","getServicesForType","servicesForTypeClient","getServiceRequestDetails","serviceTypeClient","getServiceResponseDetails","getNodes","nodesClient","nodes","getNodeDetails","node","subscribing","publishing","getParams","paramsClient","names","getTopicType","topic","topicTypeClient","getServiceType","service","getMessageDetails","messageDetailClient","typedefs","decodeTypeDefs","defs","decodeTypeDefsRec","theType","hints","typeDefDict","fieldnames","arrayLen","fieldarraylen","fieldName","fieldType","fieldtypes","indexOf","sub","subResult","ServiceResponse","isAdvertised","_serviceCallback","serviceCallId","_serviceResponse","bind","rosbridgeRequest","response","success","decompressPng","BSON","bson","SocketAdapter","handleMessage","handlePng","data","decodeBSON","reader","FileReader","onload","uint8Array","Uint8Array","deserialize","readAsArrayBuffer","onOpen","onClose","onError","onMessage","Blob","compression","throttle_rate","latch","queue_size","queue_length","reconnect_on_close","callForSubscribeAndAdvertise","waitForReconnect","reconnectFunc","_messageCallback","subscribeId","advertiseId","core","Vector3","Quaternion","Pose","orientation","applyTransform","tf","multiplyQuaternion","rotation","add","translation","tmp","clone","multiply","x","y","z","w","conjugate","norm","sqrt","normalize","invert","q","newX","newY","newZ","newW","Transform","v","subtract","ix","iy","iz","iw","classes","features","className","Class","TFClient","fixedFrame","angularThres","transThres","rate","updateDelay","seconds","topicTimeout","repubServiceName","currentTopic","frameInfos","republisherUpdateRequested","serviceClient","processTFArray","transforms","transform","frameID","child_frame_id","substring","info","cbs","cb","updateGoal","source_frames","target_frame","angular_thres","trans_thres","processResponse","topic_name","idx","UrdfTypes","UrdfBox","dimension","URDF_BOX","xyz","xml","getAttribute","parseFloat","UrdfColor","rgba","g","b","UrdfCylinder","URDF_CYLINDER","radius","UrdfJoint","parents","getElementsByTagName","parent","children","child","limits","minval","maxval","UrdfVisual","UrdfLink","visuals","UrdfMaterial","textureFilename","color","textures","colors","isLink","UrdfMesh","scale","URDF_MESH","filename","DOMParser","XPATH_FIRST_ORDERED_NODE_TYPE","UrdfModel","xmlDoc","string","materials","links","joints","parser","parseFromString","robotXml","documentElement","childNodes","tagName","material","warn","link","mat","joint","UrdfSphere","URDF_SPHERE","origin","geometry","origins","rpy","roll","pitch","yaw","phi","the","psi","sin","cos","geoms","geom","shape","nodeType","nodeName","Canvas","document","createElement","Image","image","canvas","context","getContext","width","height","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","drawImage","imageData","getImageData","jsonData","src","DOMImplementation","XMLSerializer"],"mappings":"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","file":"roslib.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n      this._events.maxListeners = conf.maxListeners !== undefined ? conf.maxListeners : defaultMaxListeners;\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this.newListener = conf.newListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    } else {\n      this._events.maxListeners = defaultMaxListeners;\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. %d listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: %s.';\n      console.error(errorMsg, count, eventName);\n    } else {\n      console.error(errorMsg, count);\n    }\n\n    if (console.trace){\n      console.trace();\n    }\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this.newListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  //\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i) {\n    if (!tree) {\n      return [];\n    }\n    var listeners=[], leaf, len, branch, xTree, xxTree, isolatedBranch, endReached,\n        typeLength = type.length, currentType = type[i], nextType = type[i+1];\n    if (i === typeLength && tree._listeners) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n      if (typeof tree._listeners === 'function') {\n        handlers && handlers.push(tree._listeners);\n        return [tree];\n      } else {\n        for (leaf = 0, len = tree._listeners.length; leaf < len; leaf++) {\n          handlers && handlers.push(tree._listeners[leaf]);\n        }\n        return [tree];\n      }\n    }\n\n    if ((currentType === '*' || currentType === '**') || tree[currentType]) {\n      //\n      // If the event emitted is '*' at this part\n      // or there is a concrete match at this patch\n      //\n      if (currentType === '*') {\n        for (branch in tree) {\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n            listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+1));\n          }\n        }\n        return listeners;\n      } else if(currentType === '**') {\n        endReached = (i+1 === typeLength || (i+2 === typeLength && nextType === '*'));\n        if(endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = listeners.concat(searchListenerTree(handlers, type, tree, typeLength));\n        }\n\n        for (branch in tree) {\n          if (branch !== '_listeners' && tree.hasOwnProperty(branch)) {\n            if(branch === '*' || branch === '**') {\n              if(tree[branch]._listeners && !endReached) {\n                listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], typeLength));\n              }\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n            } else if(branch === nextType) {\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i+2));\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              listeners = listeners.concat(searchListenerTree(handlers, type, tree[branch], i));\n            }\n          }\n        }\n        return listeners;\n      }\n\n      listeners = listeners.concat(searchListenerTree(handlers, type, tree[currentType], i+1));\n    }\n\n    xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i+1);\n    }\n\n    xxTree = tree['**'];\n    if(xxTree) {\n      if(i < typeLength) {\n        if(xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        for(branch in xxTree) {\n          if(branch !== '_listeners' && xxTree.hasOwnProperty(branch)) {\n            if(branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i+2);\n            } else if(branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i+1);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, { '**': isolatedBranch }, i+1);\n            }\n          }\n        }\n      } else if(xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength);\n      } else if(xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener) {\n\n    type = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    for(var i = 0, len = type.length; i+1 < len; i++) {\n      if(type[i] === '**' && type[i+1] === '**') {\n        return;\n      }\n    }\n\n    var tree = this.listenerTree;\n    var name = type.shift();\n\n    while (name !== undefined) {\n\n      if (!tree[name]) {\n        tree[name] = {};\n      }\n\n      tree = tree[name];\n\n      if (type.length === 0) {\n\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        }\n        else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          tree._listeners.push(listener);\n\n          if (\n            !tree._listeners.warned &&\n            this._events.maxListeners > 0 &&\n            tree._listeners.length > this._events.maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n      name = type.shift();\n    }\n    return true;\n  }\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._events || init.call(this);\n      this._events.maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn) {\n    this.many(event, 1, fn);\n    return this;\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    this.on(event, listener);\n\n    return self;\n  };\n\n  EventEmitter.prototype.emit = function() {\n\n    this._events || init.call(this);\n\n    var type = arguments[0];\n\n    if (type === 'newListener' && !this.newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    var al = arguments.length;\n    var args,l,i,j;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n      if (al > 3) {\n        args = new Array(al);\n        for (j = 0; j < al; j++) args[j] = arguments[j];\n      }\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n    }\n\n    if (this.wildcard) {\n      handler = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n      return false;\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n\n    this._events || init.call(this);\n\n    var type = arguments[0];\n\n    if (type === 'newListener' && !this.newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var args,l,i,j;\n    var handler;\n\n    if (this._all) {\n      if (al > 3) {\n        args = new Array(al);\n        for (j = 1; j < al; j++) args[j] = arguments[j];\n      }\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, args));\n        }\n      }\n    }\n\n    if (this.wildcard) {\n      handler = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener) {\n    if (typeof type === 'function') {\n      this.onAny(type);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    this.emit('newListener', type, listener);\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener);\n      return this;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    }\n    else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just append.\n      this._events[type].push(listener);\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._events.maxListeners > 0 &&\n        this._events[type].length > this._events.maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    this._all.push(fn);\n    return this;\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n    }\n    else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n\n        this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n\n        this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    function recursivelyGarbageCollect(root) {\n      if (root === undefined) {\n        return;\n      }\n      var keys = Object.keys(root);\n      for (var i in keys) {\n        var key = keys[i];\n        var obj = root[key];\n        if ((obj instanceof Function) || (typeof obj !== \"object\") || (obj === null))\n          continue;\n        if (Object.keys(obj).length > 0) {\n          recursivelyGarbageCollect(root[key]);\n        }\n        if (Object.keys(obj).length === 0) {\n          delete root[key];\n        }\n      }\n    }\n    recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++)\n        this.emit(\"removeListenerAny\", fns[i]);\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function(type) {\n    if (arguments.length === 0) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      var leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n\n      for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n        var leaf = leafs[iLeaf];\n        leaf._listeners = null;\n      }\n    }\n    else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function(type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers;\n    }\n\n    this._events || init.call(this);\n\n    if (!this._events[type]) this._events[type] = [];\n    if (!isArray(this._events[type])) {\n      this._events[type] = [this._events[type]];\n    }\n    return this._events[type];\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // Browser global.\n    window.EventEmitter2 = EventEmitter;\n  }\n}();\n\n},{}],2:[function(require,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],3:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\n/**\n * If you use roslib in a browser, all the classes will be exported to a global variable called ROSLIB.\n *\n * If you use nodejs, this is the variable you get when you require('roslib')\n */\nvar ROSLIB = this.ROSLIB || {\n  REVISION : '0.20.0'\n};\n\nvar assign = require('object-assign');\n\n// Add core components\nassign(ROSLIB, require('./core'));\n\nassign(ROSLIB, require('./actionlib'));\n\nassign(ROSLIB, require('./math'));\n\nassign(ROSLIB, require('./tf'));\n\nassign(ROSLIB, require('./urdf'));\n\nmodule.exports = ROSLIB;\n\n},{\"./actionlib\":9,\"./core\":18,\"./math\":23,\"./tf\":26,\"./urdf\":38,\"object-assign\":2}],4:[function(require,module,exports){\n(function (global){\nglobal.ROSLIB = require('./RosLib');\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./RosLib\":3}],5:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action client.\n *\n * Emits the following events:\n *  * 'timeout' - if a timeout occurred while sending a goal\n *  * 'status' - the status messages received from the action server\n *  * 'feedback' -  the feedback messages received from the action server\n *  * 'result' - the result returned from the action server\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * ros - the ROSLIB.Ros connection handle\n *   * serverName - the action server name, like /fibonacci\n *   * actionName - the action message name, like 'actionlib_tutorials/FibonacciAction'\n *   * timeout - the timeout length when connecting to the action server\n */\nfunction ActionClient(options) {\n  var that = this;\n  options = options || {};\n  this.ros = options.ros;\n  this.serverName = options.serverName;\n  this.actionName = options.actionName;\n  this.timeout = options.timeout;\n  this.omitFeedback = options.omitFeedback;\n  this.omitStatus = options.omitStatus;\n  this.omitResult = options.omitResult;\n  this.goals = {};\n\n  // flag to check if a status has been received\n  var receivedStatus = false;\n\n  // create the topics associated with actionlib\n  this.feedbackListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/feedback',\n    messageType : this.actionName + 'Feedback'\n  });\n\n  this.statusListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/status',\n    messageType : 'actionlib_msgs/GoalStatusArray'\n  });\n\n  this.resultListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/result',\n    messageType : this.actionName + 'Result'\n  });\n\n  this.goalTopic = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/goal',\n    messageType : this.actionName + 'Goal'\n  });\n\n  this.cancelTopic = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/cancel',\n    messageType : 'actionlib_msgs/GoalID'\n  });\n\n  // advertise the goal and cancel topics\n  this.goalTopic.advertise();\n  this.cancelTopic.advertise();\n\n  // subscribe to the status topic\n  if (!this.omitStatus) {\n    this.statusListener.subscribe(function(statusMessage) {\n      receivedStatus = true;\n      statusMessage.status_list.forEach(function(status) {\n        var goal = that.goals[status.goal_id.id];\n        if (goal) {\n          goal.emit('status', status);\n        }\n      });\n    });\n  }\n\n  // subscribe the the feedback topic\n  if (!this.omitFeedback) {\n    this.feedbackListener.subscribe(function(feedbackMessage) {\n      var goal = that.goals[feedbackMessage.status.goal_id.id];\n      if (goal) {\n        goal.emit('status', feedbackMessage.status);\n        goal.emit('feedback', feedbackMessage.feedback);\n      }\n    });\n  }\n\n  // subscribe to the result topic\n  if (!this.omitResult) {\n    this.resultListener.subscribe(function(resultMessage) {\n      var goal = that.goals[resultMessage.status.goal_id.id];\n\n      if (goal) {\n        goal.emit('status', resultMessage.status);\n        goal.emit('result', resultMessage.result);\n      }\n    });\n  }\n\n  // If timeout specified, emit a 'timeout' event if the action server does not respond\n  if (this.timeout) {\n    setTimeout(function() {\n      if (!receivedStatus) {\n        that.emit('timeout');\n      }\n    }, this.timeout);\n  }\n}\n\nActionClient.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Cancel all goals associated with this ActionClient.\n */\nActionClient.prototype.cancel = function() {\n  var cancelMessage = new Message();\n  this.cancelTopic.publish(cancelMessage);\n};\n\n/**\n * Unsubscribe and unadvertise all topics associated with this ActionClient.\n */\nActionClient.prototype.dispose = function() {\n  this.goalTopic.unadvertise();\n  this.cancelTopic.unadvertise();\n  if (!this.omitStatus) {this.statusListener.unsubscribe();}\n  if (!this.omitFeedback) {this.feedbackListener.unsubscribe();}\n  if (!this.omitResult) {this.resultListener.unsubscribe();}\n};\n\nmodule.exports = ActionClient;\n\n},{\"../core/Message\":10,\"../core/Topic\":17,\"eventemitter2\":1}],6:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Justin Young - justin@oodar.com.au\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action listener\n *\n * Emits the following events:\n *  * 'status' - the status messages received from the action server\n *  * 'feedback' -  the feedback messages received from the action server\n *  * 'result' - the result returned from the action server\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * ros - the ROSLIB.Ros connection handle\n *   * serverName - the action server name, like /fibonacci\n *   * actionName - the action message name, like 'actionlib_tutorials/FibonacciAction'\n */\nfunction ActionListener(options) {\n  var that = this;\n  options = options || {};\n  this.ros = options.ros;\n  this.serverName = options.serverName;\n  this.actionName = options.actionName;\n  this.timeout = options.timeout;\n  this.omitFeedback = options.omitFeedback;\n  this.omitStatus = options.omitStatus;\n  this.omitResult = options.omitResult;\n\n\n  // create the topics associated with actionlib\n  var goalListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/goal',\n    messageType : this.actionName + 'Goal'\n  });\n\n  var feedbackListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/feedback',\n    messageType : this.actionName + 'Feedback'\n  });\n\n  var statusListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/status',\n    messageType : 'actionlib_msgs/GoalStatusArray'\n  });\n\n  var resultListener = new Topic({\n    ros : this.ros,\n    name : this.serverName + '/result',\n    messageType : this.actionName + 'Result'\n  });\n\n  goalListener.subscribe(function(goalMessage) {\n      that.emit('goal', goalMessage);\n  });\n\n  statusListener.subscribe(function(statusMessage) {\n      statusMessage.status_list.forEach(function(status) {\n          that.emit('status', status);\n      });\n  });\n\n  feedbackListener.subscribe(function(feedbackMessage) {\n      that.emit('status', feedbackMessage.status);\n      that.emit('feedback', feedbackMessage.feedback);\n  });\n\n  // subscribe to the result topic\n  resultListener.subscribe(function(resultMessage) {\n      that.emit('status', resultMessage.status);\n      that.emit('result', resultMessage.result);\n  });\n\n}\n\nActionListener.prototype.__proto__ = EventEmitter2.prototype;\n\nmodule.exports = ActionListener;\n\n},{\"../core/Message\":10,\"../core/Topic\":17,\"eventemitter2\":1}],7:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib goal goal is associated with an action server.\n *\n * Emits the following events:\n *  * 'timeout' - if a timeout occurred while sending a goal\n *\n *  @constructor\n *  @param object with following keys:\n *   * actionClient - the ROSLIB.ActionClient to use with this goal\n *   * goalMessage - The JSON object containing the goal for the action server\n */\nfunction Goal(options) {\n  var that = this;\n  this.actionClient = options.actionClient;\n  this.goalMessage = options.goalMessage;\n  this.isFinished = false;\n\n  // Used to create random IDs\n  var date = new Date();\n\n  // Create a random ID\n  this.goalID = 'goal_' + Math.random() + '_' + date.getTime();\n  // Fill in the goal message\n  this.goalMessage = new Message({\n    goal_id : {\n      stamp : {\n        secs : 0,\n        nsecs : 0\n      },\n      id : this.goalID\n    },\n    goal : this.goalMessage\n  });\n\n  this.on('status', function(status) {\n    that.status = status;\n  });\n\n  this.on('result', function(result) {\n    that.isFinished = true;\n    that.result = result;\n  });\n\n  this.on('feedback', function(feedback) {\n    that.feedback = feedback;\n  });\n\n  // Add the goal\n  this.actionClient.goals[this.goalID] = this;\n}\n\nGoal.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Send the goal to the action server.\n *\n * @param timeout (optional) - a timeout length for the goal's result\n */\nGoal.prototype.send = function(timeout) {\n  var that = this;\n  that.actionClient.goalTopic.publish(that.goalMessage);\n  if (timeout) {\n    setTimeout(function() {\n      if (!that.isFinished) {\n        that.emit('timeout');\n      }\n    }, timeout);\n  }\n};\n\n/**\n * Cancel the current goal.\n */\nGoal.prototype.cancel = function() {\n  var cancelMessage = new Message({\n    id : this.goalID\n  });\n  this.actionClient.cancelTopic.publish(cancelMessage);\n};\n\nmodule.exports = Goal;\n},{\"../core/Message\":10,\"eventemitter2\":1}],8:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Laura Lindzey - lindzey@gmail.com\n */\n\nvar Topic = require('../core/Topic');\nvar Message = require('../core/Message');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * An actionlib action server client.\n *\n * Emits the following events:\n *  * 'goal' - goal sent by action client\n *  * 'cancel' - action client has canceled the request\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * ros - the ROSLIB.Ros connection handle\n *   * serverName - the action server name, like /fibonacci\n *   * actionName - the action message name, like 'actionlib_tutorials/FibonacciAction'\n */\n\nfunction SimpleActionServer(options) {\n    var that = this;\n    options = options || {};\n    this.ros = options.ros;\n    this.serverName = options.serverName;\n    this.actionName = options.actionName;\n\n    // create and advertise publishers\n    this.feedbackPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/feedback',\n        messageType : this.actionName + 'Feedback'\n    });\n    this.feedbackPublisher.advertise();\n\n    var statusPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/status',\n        messageType : 'actionlib_msgs/GoalStatusArray'\n    });\n    statusPublisher.advertise();\n\n    this.resultPublisher = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/result',\n        messageType : this.actionName + 'Result'\n    });\n    this.resultPublisher.advertise();\n\n    // create and subscribe to listeners\n    var goalListener = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/goal',\n        messageType : this.actionName + 'Goal'\n    });\n\n    var cancelListener = new Topic({\n        ros : this.ros,\n        name : this.serverName + '/cancel',\n        messageType : 'actionlib_msgs/GoalID'\n    });\n\n    // Track the goals and their status in order to publish status...\n    this.statusMessage = new Message({\n        header : {\n            stamp : {secs : 0, nsecs : 100},\n            frame_id : ''\n        },\n        status_list : []\n    });\n\n    // needed for handling preemption prompted by a new goal being received\n    this.currentGoal = null; // currently tracked goal\n    this.nextGoal = null; // the one that'll be preempting\n\n    goalListener.subscribe(function(goalMessage) {\n\n    if(that.currentGoal) {\n            that.nextGoal = goalMessage;\n            // needs to happen AFTER rest is set up\n            that.emit('cancel');\n    } else {\n            that.statusMessage.status_list = [{goal_id : goalMessage.goal_id, status : 1}];\n            that.currentGoal = goalMessage;\n            that.emit('goal', goalMessage.goal);\n    }\n    });\n\n    // helper function for determing ordering of timestamps\n    // returns t1 < t2\n    var isEarlier = function(t1, t2) {\n        if(t1.secs > t2.secs) {\n            return false;\n        } else if(t1.secs < t2.secs) {\n            return true;\n        } else if(t1.nsecs < t2.nsecs) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    // TODO: this may be more complicated than necessary, since I'm\n    // not sure if the callbacks can ever wind up with a scenario\n    // where we've been preempted by a next goal, it hasn't finished\n    // processing, and then we get a cancel message\n    cancelListener.subscribe(function(cancelMessage) {\n\n        // cancel ALL goals if both empty\n        if(cancelMessage.stamp.secs === 0 && cancelMessage.stamp.secs === 0 && cancelMessage.id === '') {\n            that.nextGoal = null;\n            if(that.currentGoal) {\n                that.emit('cancel');\n            }\n        } else { // treat id and stamp independently\n            if(that.currentGoal && cancelMessage.id === that.currentGoal.goal_id.id) {\n                that.emit('cancel');\n            } else if(that.nextGoal && cancelMessage.id === that.nextGoal.goal_id.id) {\n                that.nextGoal = null;\n            }\n\n            if(that.nextGoal && isEarlier(that.nextGoal.goal_id.stamp,\n                                          cancelMessage.stamp)) {\n                that.nextGoal = null;\n            }\n            if(that.currentGoal && isEarlier(that.currentGoal.goal_id.stamp,\n                                             cancelMessage.stamp)) {\n\n                that.emit('cancel');\n            }\n        }\n    });\n\n    // publish status at pseudo-fixed rate; required for clients to know they've connected\n    var statusInterval = setInterval( function() {\n        var currentTime = new Date();\n        var secs = Math.floor(currentTime.getTime()/1000);\n        var nsecs = Math.round(1000000000*(currentTime.getTime()/1000-secs));\n        that.statusMessage.header.stamp.secs = secs;\n        that.statusMessage.header.stamp.nsecs = nsecs;\n        statusPublisher.publish(that.statusMessage);\n    }, 500); // publish every 500ms\n\n}\n\nSimpleActionServer.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n*  Set action state to succeeded and return to client\n*/\n\nSimpleActionServer.prototype.setSucceeded = function(result2) {\n\n\n    var resultMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 3},\n        result : result2\n    });\n    this.resultPublisher.publish(resultMessage);\n\n    this.statusMessage.status_list = [];\n    if(this.nextGoal) {\n        this.currentGoal = this.nextGoal;\n        this.nextGoal = null;\n        this.emit('goal', this.currentGoal.goal);\n    } else {\n        this.currentGoal = null;\n    }\n};\n\n/**\n*  Function to send feedback\n*/\n\nSimpleActionServer.prototype.sendFeedback = function(feedback2) {\n\n    var feedbackMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 1},\n        feedback : feedback2\n    });\n    this.feedbackPublisher.publish(feedbackMessage);\n};\n\n/**\n*  Handle case where client requests preemption\n*/\n\nSimpleActionServer.prototype.setPreempted = function() {\n\n    this.statusMessage.status_list = [];\n    var resultMessage = new Message({\n        status : {goal_id : this.currentGoal.goal_id, status : 2},\n    });\n    this.resultPublisher.publish(resultMessage);\n\n    if(this.nextGoal) {\n        this.currentGoal = this.nextGoal;\n        this.nextGoal = null;\n        this.emit('goal', this.currentGoal.goal);\n    } else {\n        this.currentGoal = null;\n    }\n};\n\nmodule.exports = SimpleActionServer;\n},{\"../core/Message\":10,\"../core/Topic\":17,\"eventemitter2\":1}],9:[function(require,module,exports){\nvar Ros = require('../core/Ros');\nvar mixin = require('../mixin');\n\nvar action = module.exports = {\n    ActionClient: require('./ActionClient'),\n    ActionListener: require('./ActionListener'),\n    Goal: require('./Goal'),\n    SimpleActionServer: require('./SimpleActionServer')\n};\n\nmixin(Ros, ['ActionClient', 'SimpleActionServer'], action);\n\n},{\"../core/Ros\":12,\"../mixin\":24,\"./ActionClient\":5,\"./ActionListener\":6,\"./Goal\":7,\"./SimpleActionServer\":8}],10:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * Message objects are used for publishing and subscribing to and from topics.\n *\n * @constructor\n * @param values - object matching the fields defined in the .msg definition file\n */\nfunction Message(values) {\n  assign(this, values);\n}\n\nmodule.exports = Message;\n},{\"object-assign\":2}],11:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar Service = require('./Service');\nvar ServiceRequest = require('./ServiceRequest');\n\n/**\n * A ROS parameter.\n *\n * @constructor\n * @param options - possible keys include:\n *   * ros - the ROSLIB.Ros connection handle\n *   * name - the param name, like max_vel_x\n */\nfunction Param(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n}\n\n/**\n * Fetches the value of the param.\n *\n * @param callback - function with the following params:\n *  * value - the value of the param from ROS.\n */\nParam.prototype.get = function(callback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/get_param',\n    serviceType : 'rosapi/GetParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name\n  });\n\n  paramClient.callService(request, function(result) {\n    var value = JSON.parse(result.value);\n    callback(value);\n  });\n};\n\n/**\n * Sets the value of the param in ROS.\n *\n * @param value - value to set param to.\n */\nParam.prototype.set = function(value, callback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/set_param',\n    serviceType : 'rosapi/SetParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name,\n    value : JSON.stringify(value)\n  });\n\n  paramClient.callService(request, callback);\n};\n\n/**\n * Delete this parameter on the ROS server.\n */\nParam.prototype.delete = function(callback) {\n  var paramClient = new Service({\n    ros : this.ros,\n    name : '/rosapi/delete_param',\n    serviceType : 'rosapi/DeleteParam'\n  });\n\n  var request = new ServiceRequest({\n    name : this.name\n  });\n\n  paramClient.callService(request, callback);\n};\n\nmodule.exports = Param;\n},{\"./Service\":13,\"./ServiceRequest\":14}],12:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar WebSocket = require('ws');\nvar socketAdapter = require('./SocketAdapter.js');\n\nvar Service = require('./Service');\nvar ServiceRequest = require('./ServiceRequest');\n\nvar assign = require('object-assign');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * Manages connection to the server and all interactions with ROS.\n *\n * Emits the following events:\n *  * 'error' - there was an error with ROS\n *  * 'connection' - connected to the WebSocket server\n *  * 'close' - disconnected to the WebSocket server\n *  * <topicName> - a message came from rosbridge with the given topic name\n *  * <serviceID> - a service response came from rosbridge with the given ID\n *\n * @constructor\n * @param options - possible keys include: <br>\n *   * url (optional) - (can be specified later with `connect`) the WebSocket URL for rosbridge or the node server url to connect using socket.io (if socket.io exists in the page) <br>\n *   * groovyCompatibility - don't use interfaces that changed after the last groovy release or rosbridge_suite and related tools (defaults to true)\n *   * transportLibrary (optional) - one of 'websocket' (default), 'socket.io' or RTCPeerConnection instance controlling how the connection is created in `connect`.\n *   * transportOptions (optional) - the options to use use when creating a connection. Currently only used if `transportLibrary` is RTCPeerConnection.\n */\nfunction Ros(options) {\n  options = options || {};\n  this.socket = null;\n  this.idCounter = 0;\n  this.isConnected = false;\n  this.transportLibrary = options.transportLibrary || 'websocket';\n  this.transportOptions = options.transportOptions || {};\n\n  if (typeof options.groovyCompatibility === 'undefined') {\n    this.groovyCompatibility = true;\n  }\n  else {\n    this.groovyCompatibility = options.groovyCompatibility;\n  }\n\n  // Sets unlimited event listeners.\n  this.setMaxListeners(0);\n\n  // begin by checking if a URL was given\n  if (options.url) {\n    this.connect(options.url);\n  }\n}\n\nRos.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Connect to the specified WebSocket.\n *\n * @param url - WebSocket URL or RTCDataChannel label for Rosbridge\n */\nRos.prototype.connect = function(url) {\n  if (this.transportLibrary === 'socket.io') {\n    this.socket = assign(io(url, {'force new connection': true}), socketAdapter(this));\n    this.socket.on('connect', this.socket.onopen);\n    this.socket.on('data', this.socket.onmessage);\n    this.socket.on('close', this.socket.onclose);\n    this.socket.on('error', this.socket.onerror);\n  } else if (this.transportLibrary.constructor.name === 'RTCPeerConnection') {\n    this.socket = assign(this.transportLibrary.createDataChannel(url, this.transportOptions), socketAdapter(this));\n  }else {\n    this.socket = assign(new WebSocket(url), socketAdapter(this));\n  }\n\n};\n\n/**\n * Disconnect from the WebSocket server.\n */\nRos.prototype.close = function() {\n  if (this.socket) {\n    this.socket.close();\n  }\n};\n\n/**\n * Sends an authorization request to the server.\n *\n * @param mac - MAC (hash) string given by the trusted source.\n * @param client - IP of the client.\n * @param dest - IP of the destination.\n * @param rand - Random string given by the trusted source.\n * @param t - Time of the authorization request.\n * @param level - User level as a string given by the client.\n * @param end - End time of the client's session.\n */\nRos.prototype.authenticate = function(mac, client, dest, rand, t, level, end) {\n  // create the request\n  var auth = {\n    op : 'auth',\n    mac : mac,\n    client : client,\n    dest : dest,\n    rand : rand,\n    t : t,\n    level : level,\n    end : end\n  };\n  // send the request\n  this.callOnConnection(auth);\n};\n\n/**\n * Sends the message over the WebSocket, but queues the message up if not yet\n * connected.\n */\nRos.prototype.callOnConnection = function(message) {\n  var that = this;\n  var messageJson = JSON.stringify(message);\n  var emitter = null;\n  if (this.transportLibrary === 'socket.io') {\n    emitter = function(msg){that.socket.emit('operation', msg);};\n  } else {\n    emitter = function(msg){that.socket.send(msg);};\n  }\n\n  if (!this.isConnected) {\n    that.once('connection', function() {\n      emitter(messageJson);\n    });\n  } else {\n    emitter(messageJson);\n  }\n};\n\n/**\n * Sends a set_level request to the server\n *\n * @param level - Status level (none, error, warning, info)\n * @param id - Optional: Operation ID to change status level on\n */\nRos.prototype.setStatusLevel = function(level, id){\n  var levelMsg = {\n    op: 'set_level',\n    level: level,\n    id: id\n  };\n\n  this.callOnConnection(levelMsg);\n};\n\n/**\n * Retrieves Action Servers in ROS as an array of string\n *\n *   * actionservers - Array of action server names\n */\nRos.prototype.getActionServers = function(callback, failedCallback) {\n  var getActionServers = new Service({\n    ros : this,\n    name : '/rosapi/action_servers',\n    serviceType : 'rosapi/GetActionServers'\n  });\n\n  var request = new ServiceRequest({});\n  if (typeof failedCallback === 'function'){\n    getActionServers.callService(request,\n      function(result) {\n        callback(result.action_servers);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    getActionServers.callService(request, function(result) {\n      callback(result.action_servers);\n    });\n  }\n};\n\n/**\n * Retrieves list of topics in ROS as an array.\n *\n * @param callback function with params:\n *   * topics - Array of topic names\n */\nRos.prototype.getTopics = function(callback, failedCallback) {\n  var topicsClient = new Service({\n    ros : this,\n    name : '/rosapi/topics',\n    serviceType : 'rosapi/Topics'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    topicsClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicsClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieves Topics in ROS as an array as specific type\n *\n * @param topicType topic type to find:\n * @param callback function with params:\n *   * topics - Array of topic names\n */\nRos.prototype.getTopicsForType = function(topicType, callback, failedCallback) {\n  var topicsForTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/topics_for_type',\n    serviceType : 'rosapi/TopicsForType'\n  });\n\n  var request = new ServiceRequest({\n    type: topicType\n  });\n  if (typeof failedCallback === 'function'){\n    topicsForTypeClient.callService(request,\n      function(result) {\n        callback(result.topics);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicsForTypeClient.callService(request, function(result) {\n      callback(result.topics);\n    });\n  }\n};\n\n/**\n * Retrieves list of active service names in ROS.\n *\n * @param callback - function with the following params:\n *   * services - array of service names\n */\nRos.prototype.getServices = function(callback, failedCallback) {\n  var servicesClient = new Service({\n    ros : this,\n    name : '/rosapi/services',\n    serviceType : 'rosapi/Services'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    servicesClient.callService(request,\n      function(result) {\n        callback(result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    servicesClient.callService(request, function(result) {\n      callback(result.services);\n    });\n  }\n};\n\n/**\n * Retrieves list of services in ROS as an array as specific type\n *\n * @param serviceType service type to find:\n * @param callback function with params:\n *   * topics - Array of service names\n */\nRos.prototype.getServicesForType = function(serviceType, callback, failedCallback) {\n  var servicesForTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/services_for_type',\n    serviceType : 'rosapi/ServicesForType'\n  });\n\n  var request = new ServiceRequest({\n    type: serviceType\n  });\n  if (typeof failedCallback === 'function'){\n    servicesForTypeClient.callService(request,\n      function(result) {\n        callback(result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    servicesForTypeClient.callService(request, function(result) {\n      callback(result.services);\n    });\n  }\n};\n\n/**\n * Retrieves a detail of ROS service request.\n *\n * @param service name of service:\n * @param callback - function with params:\n *   * type - String of the service type\n */\nRos.prototype.getServiceRequestDetails = function(type, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_request_details',\n    serviceType : 'rosapi/ServiceRequestDetails'\n  });\n  var request = new ServiceRequest({\n    type: type\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieves a detail of ROS service request.\n *\n * @param service name of service:\n * @param callback - function with params:\n *   * type - String of the service type\n */\nRos.prototype.getServiceResponseDetails = function(type, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_response_details',\n    serviceType : 'rosapi/ServiceResponseDetails'\n  });\n  var request = new ServiceRequest({\n    type: type\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieves list of active node names in ROS.\n *\n * @param callback - function with the following params:\n *   * nodes - array of node names\n */\nRos.prototype.getNodes = function(callback, failedCallback) {\n  var nodesClient = new Service({\n    ros : this,\n    name : '/rosapi/nodes',\n    serviceType : 'rosapi/Nodes'\n  });\n\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    nodesClient.callService(request,\n      function(result) {\n        callback(result.nodes);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  }else{\n    nodesClient.callService(request, function(result) {\n      callback(result.nodes);\n    });\n  }\n};\n\n/**\n  * Retrieves list subscribed topics, publishing topics and services of a specific node\n  *\n  * @param node name of the node:\n  * @param callback - function with params:\n  *   * publications - array of published topic names\n  *   * subscriptions - array of subscribed topic names\n  *   * services - array of service names hosted\n  */\nRos.prototype.getNodeDetails = function(node, callback, failedCallback) {\n  var nodesClient = new Service({\n    ros : this,\n    name : '/rosapi/node_details',\n    serviceType : 'rosapi/NodeDetails'\n  });\n\n  var request = new ServiceRequest({\n    node: node\n  });\n  if (typeof failedCallback === 'function'){\n    nodesClient.callService(request,\n      function(result) {\n        callback(result.subscribing, result.publishing, result.services);\n      },\n      function(message) {\n        failedCallback(message);\n      }\n    );\n  } else {\n    nodesClient.callService(request, function(result) {\n      callback(result);\n    });\n  }\n};\n\n/**\n * Retrieves list of param names from the ROS Parameter Server.\n *\n * @param callback function with params:\n *  * params - array of param names.\n */\nRos.prototype.getParams = function(callback, failedCallback) {\n  var paramsClient = new Service({\n    ros : this,\n    name : '/rosapi/get_param_names',\n    serviceType : 'rosapi/GetParamNames'\n  });\n  var request = new ServiceRequest();\n  if (typeof failedCallback === 'function'){\n    paramsClient.callService(request,\n      function(result) {\n        callback(result.names);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    paramsClient.callService(request, function(result) {\n      callback(result.names);\n    });\n  }\n};\n\n/**\n * Retrieves a type of ROS topic.\n *\n * @param topic name of the topic:\n * @param callback - function with params:\n *   * type - String of the topic type\n */\nRos.prototype.getTopicType = function(topic, callback, failedCallback) {\n  var topicTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/topic_type',\n    serviceType : 'rosapi/TopicType'\n  });\n  var request = new ServiceRequest({\n    topic: topic\n  });\n\n  if (typeof failedCallback === 'function'){\n    topicTypeClient.callService(request,\n      function(result) {\n        callback(result.type);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    topicTypeClient.callService(request, function(result) {\n      callback(result.type);\n    });\n  }\n};\n\n/**\n * Retrieves a type of ROS service.\n *\n * @param service name of service:\n * @param callback - function with params:\n *   * type - String of the service type\n */\nRos.prototype.getServiceType = function(service, callback, failedCallback) {\n  var serviceTypeClient = new Service({\n    ros : this,\n    name : '/rosapi/service_type',\n    serviceType : 'rosapi/ServiceType'\n  });\n  var request = new ServiceRequest({\n    service: service\n  });\n\n  if (typeof failedCallback === 'function'){\n    serviceTypeClient.callService(request,\n      function(result) {\n        callback(result.type);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    serviceTypeClient.callService(request, function(result) {\n      callback(result.type);\n    });\n  }\n};\n\n/**\n * Retrieves a detail of ROS message.\n *\n * @param callback - function with params:\n *   * details - Array of the message detail\n * @param message - String of a topic type\n */\nRos.prototype.getMessageDetails = function(message, callback, failedCallback) {\n  var messageDetailClient = new Service({\n    ros : this,\n    name : '/rosapi/message_details',\n    serviceType : 'rosapi/MessageDetails'\n  });\n  var request = new ServiceRequest({\n    type: message\n  });\n\n  if (typeof failedCallback === 'function'){\n    messageDetailClient.callService(request,\n      function(result) {\n        callback(result.typedefs);\n      },\n      function(message){\n        failedCallback(message);\n      }\n    );\n  }else{\n    messageDetailClient.callService(request, function(result) {\n      callback(result.typedefs);\n    });\n  }\n};\n\n/**\n * Decode a typedefs into a dictionary like `rosmsg show foo/bar`\n *\n * @param defs - array of type_def dictionary\n */\nRos.prototype.decodeTypeDefs = function(defs) {\n  var that = this;\n\n  // calls itself recursively to resolve type definition using hints.\n  var decodeTypeDefsRec = function(theType, hints) {\n    var typeDefDict = {};\n    for (var i = 0; i < theType.fieldnames.length; i++) {\n      var arrayLen = theType.fieldarraylen[i];\n      var fieldName = theType.fieldnames[i];\n      var fieldType = theType.fieldtypes[i];\n      if (fieldType.indexOf('/') === -1) { // check the fieldType includes '/' or not\n        if (arrayLen === -1) {\n          typeDefDict[fieldName] = fieldType;\n        }\n        else {\n          typeDefDict[fieldName] = [fieldType];\n        }\n      }\n      else {\n        // lookup the name\n        var sub = false;\n        for (var j = 0; j < hints.length; j++) {\n          if (hints[j].type.toString() === fieldType.toString()) {\n            sub = hints[j];\n            break;\n          }\n        }\n        if (sub) {\n          var subResult = decodeTypeDefsRec(sub, hints);\n          if (arrayLen === -1) {\n          }\n          else {\n            typeDefDict[fieldName] = [subResult];\n          }\n        }\n        else {\n          that.emit('error', 'Cannot find ' + fieldType + ' in decodeTypeDefs');\n        }\n      }\n    }\n    return typeDefDict;\n  };\n\n  return decodeTypeDefsRec(defs[0], defs);\n};\n\n\nmodule.exports = Ros;\n\n},{\"./Service\":13,\"./ServiceRequest\":14,\"./SocketAdapter.js\":16,\"eventemitter2\":1,\"object-assign\":2,\"ws\":39}],13:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar ServiceResponse = require('./ServiceResponse');\nvar ServiceRequest = require('./ServiceRequest');\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\n\n/**\n * A ROS service client.\n *\n * @constructor\n * @params options - possible keys include:\n *   * ros - the ROSLIB.Ros connection handle\n *   * name - the service name, like /add_two_ints\n *   * serviceType - the service type, like 'rospy_tutorials/AddTwoInts'\n */\nfunction Service(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n  this.serviceType = options.serviceType;\n  this.isAdvertised = false;\n\n  this._serviceCallback = null;\n}\nService.prototype.__proto__ = EventEmitter2.prototype;\n/**\n * Calls the service. Returns the service response in the callback.\n *\n * @param request - the ROSLIB.ServiceRequest to send\n * @param callback - function with params:\n *   * response - the response from the service request\n * @param failedCallback - the callback function when the service call failed (optional). Params:\n *   * error - the error message reported by ROS\n */\nService.prototype.callService = function(request, callback, failedCallback) {\n  if (this.isAdvertised) {\n    return;\n  }\n\n  var serviceCallId = 'call_service:' + this.name + ':' + (++this.ros.idCounter);\n\n  if (callback || failedCallback) {\n    this.ros.once(serviceCallId, function(message) {\n      if (message.result !== undefined && message.result === false) {\n        if (typeof failedCallback === 'function') {\n          failedCallback(message.values);\n        }\n      } else if (typeof callback === 'function') {\n        callback(new ServiceResponse(message.values));\n      }\n    });\n  }\n\n  var call = {\n    op : 'call_service',\n    id : serviceCallId,\n    service : this.name,\n    args : request\n  };\n  this.ros.callOnConnection(call);\n};\n\n/**\n * Every time a message is published for the given topic, the callback\n * will be called with the message object.\n *\n * @param callback - function with the following params:\n *   * message - the published message\n */\nService.prototype.advertise = function(callback) {\n  if (this.isAdvertised || typeof callback !== 'function') {\n    return;\n  }\n\n  this._serviceCallback = callback;\n  this.ros.on(this.name, this._serviceResponse.bind(this));\n  this.ros.callOnConnection({\n    op: 'advertise_service',\n    type: this.serviceType,\n    service: this.name\n  });\n  this.isAdvertised = true;\n};\n\nService.prototype.unadvertise = function() {\n  if (!this.isAdvertised) {\n    return;\n  }\n  this.ros.callOnConnection({\n    op: 'unadvertise_service',\n    service: this.name\n  });\n  this.isAdvertised = false;\n};\n\nService.prototype._serviceResponse = function(rosbridgeRequest) {\n  var response = {};\n  var success = this._serviceCallback(rosbridgeRequest.args, response);\n\n  var call = {\n    op: 'service_response',\n    service: this.name,\n    values: new ServiceResponse(response),\n    result: success\n  };\n\n  if (rosbridgeRequest.id) {\n    call.id = rosbridgeRequest.id;\n  }\n\n  this.ros.callOnConnection(call);\n};\n\nmodule.exports = Service;\n},{\"./ServiceRequest\":14,\"./ServiceResponse\":15,\"eventemitter2\":1}],14:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - balexander@willowgarage.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * A ServiceRequest is passed into the service call.\n *\n * @constructor\n * @param values - object matching the fields defined in the .srv definition file\n */\nfunction ServiceRequest(values) {\n  assign(this, values);\n}\n\nmodule.exports = ServiceRequest;\n},{\"object-assign\":2}],15:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - balexander@willowgarage.com\n */\n\nvar assign = require('object-assign');\n\n/**\n * A ServiceResponse is returned from the service call.\n *\n * @constructor\n * @param values - object matching the fields defined in the .srv definition file\n */\nfunction ServiceResponse(values) {\n  assign(this, values);\n}\n\nmodule.exports = ServiceResponse;\n},{\"object-assign\":2}],16:[function(require,module,exports){\n/**\n * Socket event handling utilities for handling events on either\n * WebSocket and TCP sockets\n *\n * Note to anyone reviewing this code: these functions are called\n * in the context of their parent object, unless bound\n * @fileOverview\n */\n'use strict';\n\nvar decompressPng = require('../util/decompressPng');\nvar WebSocket = require('ws');\nvar BSON = null;\nif(typeof bson !== 'undefined'){\n    BSON = bson().BSON;\n}\n\n/**\n * Events listeners for a WebSocket or TCP socket to a JavaScript\n * ROS Client. Sets up Messages for a given topic to trigger an\n * event on the ROS client.\n *\n * @namespace SocketAdapter\n * @private\n */\nfunction SocketAdapter(client) {\n  function handleMessage(message) {\n    if (message.op === 'publish') {\n      client.emit(message.topic, message.msg);\n    } else if (message.op === 'service_response') {\n      client.emit(message.id, message);\n    } else if (message.op === 'call_service') {\n      client.emit(message.service, message);\n    } else if(message.op === 'status'){\n      if(message.id){\n        client.emit('status:'+message.id, message);\n      } else {\n        client.emit('status', message);\n      }\n    }\n  }\n\n  function handlePng(message, callback) {\n    if (message.op === 'png') {\n      decompressPng(message.data, callback);\n    } else {\n      callback(message);\n    }\n  }\n\n  function decodeBSON(data, callback) {\n    if (!BSON) {\n      throw 'Cannot process BSON encoded message without BSON header.';\n    }\n    var reader = new FileReader();\n    reader.onload  = function() {\n      var uint8Array = new Uint8Array(this.result);\n      var msg = BSON.deserialize(uint8Array);\n      callback(msg);\n    };\n    reader.readAsArrayBuffer(data);\n  }\n\n  return {\n    /**\n     * Emits a 'connection' event on WebSocket connection.\n     *\n     * @param event - the argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onopen: function onOpen(event) {\n      client.isConnected = true;\n      client.emit('connection', event);\n    },\n\n    /**\n     * Emits a 'close' event on WebSocket disconnection.\n     *\n     * @param event - the argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onclose: function onClose(event) {\n      client.isConnected = false;\n      client.emit('close', event);\n    },\n\n    /**\n     * Emits an 'error' event whenever there was an error.\n     *\n     * @param event - the argument to emit with the event.\n     * @memberof SocketAdapter\n     */\n    onerror: function onError(event) {\n      client.emit('error', event);\n    },\n\n    /**\n     * Parses message responses from rosbridge and sends to the appropriate\n     * topic, service, or param.\n     *\n     * @param message - the raw JSON message from rosbridge.\n     * @memberof SocketAdapter\n     */\n    onmessage: function onMessage(data) {\n      if (typeof Blob !== 'undefined' && data.data instanceof Blob) {\n        decodeBSON(data.data, function (message) {\n          handlePng(message, handleMessage);\n        });\n      } else {\n        var message = JSON.parse(typeof data === 'string' ? data : data.data);\n        handlePng(message, handleMessage);\n      }\n    }\n  };\n}\n\nmodule.exports = SocketAdapter;\n\n},{\"../util/decompressPng\":41,\"ws\":39}],17:[function(require,module,exports){\n/**\n * @fileoverview\n * @author Brandon Alexander - baalexander@gmail.com\n */\n\nvar EventEmitter2 = require('eventemitter2').EventEmitter2;\nvar Message = require('./Message');\n\n/**\n * Publish and/or subscribe to a topic in ROS.\n *\n * Emits the following events:\n *  * 'warning' - if there are any warning during the Topic creation\n *  * 'message' - the message data from rosbridge\n *\n * @constructor\n * @param options - object with following keys:\n *   * ros - the ROSLIB.Ros connection handle\n *   * name - the topic name, like /cmd_vel\n *   * messageType - the message type, like 'std_msgs/String'\n *   * compression - the type of compression to use, like 'png'\n *   * throttle_rate - the rate (in ms in between messages) at which to throttle the topics\n *   * queue_size - the queue created at bridge side for re-publishing webtopics (defaults to 100)\n *   * latch - latch the topic when publishing\n *   * queue_length - the queue length at bridge side used when subscribing (defaults to 0, no queueing).\n *   * reconnect_on_close - the flag to enable resubscription and readvertisement on close event(defaults to true).\n */\nfunction Topic(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.name = options.name;\n  this.messageType = options.messageType;\n  this.isAdvertised = false;\n  this.compression = options.compression || 'none';\n  this.throttle_rate = options.throttle_rate || 0;\n  this.latch = options.latch || false;\n  this.queue_size = options.queue_size || 100;\n  this.queue_length = options.queue_length || 0;\n  this.reconnect_on_close = options.reconnect_on_close || true;\n\n  // Check for valid compression types\n  if (this.compression && this.compression !== 'png' &&\n    this.compression !== 'none') {\n    this.emit('warning', this.compression +\n      ' compression is not supported. No compression will be used.');\n  }\n\n  // Check if throttle rate is negative\n  if (this.throttle_rate < 0) {\n    this.emit('warning', this.throttle_rate + ' is not allowed. Set to 0');\n    this.throttle_rate = 0;\n  }\n\n  var that = this;\n  if (this.reconnect_on_close) {\n    this.callForSubscribeAndAdvertise = function(message) {\n      that.ros.callOnConnection(message);\n\n      that.waitForReconnect = false;\n      that.reconnectFunc = function() {\n        if(!that.waitForReconnect) {\n          that.waitForReconnect = true;\n          that.ros.callOnConnection(message);\n          that.ros.once('connection', function() {\n            that.waitForReconnect = false;\n          });\n        }\n      };\n      that.ros.on('close', that.reconnectFunc);\n    };\n  }\n  else {\n    this.callForSubscribeAndAdvertise = this.ros.callOnConnection;\n  }\n\n  this._messageCallback = function(data) {\n    that.emit('message', new Message(data));\n  };\n}\nTopic.prototype.__proto__ = EventEmitter2.prototype;\n\n/**\n * Every time a message is published for the given topic, the callback\n * will be called with the message object.\n *\n * @param callback - function with the following params:\n *   * message - the published message\n */\nTopic.prototype.subscribe = function(callback) {\n  if (typeof callback === 'function') {\n    this.on('message', callback);\n  }\n\n  if (this.subscribeId) { return; }\n  this.ros.on(this.name, this._messageCallback);\n  this.subscribeId = 'subscribe:' + this.name + ':' + (++this.ros.idCounter);\n\n  this.callForSubscribeAndAdvertise({\n    op: 'subscribe',\n    id: this.subscribeId,\n    type: this.messageType,\n    topic: this.name,\n    compression: this.compression,\n    throttle_rate: this.throttle_rate,\n    queue_length: this.queue_length\n  });\n};\n\n/**\n * Unregisters as a subscriber for the topic. Unsubscribing stop remove\n * all subscribe callbacks. To remove a call back, you must explicitly\n * pass the callback function in.\n *\n * @param callback - the optional callback to unregister, if\n *     * provided and other listeners are registered the topic won't\n *     * unsubscribe, just stop emitting to the passed listener\n */\nTopic.prototype.unsubscribe = function(callback) {\n  if (callback) {\n    this.off('message', callback);\n    // If there is any other callbacks still subscribed don't unsubscribe\n    if (this.listeners('message').length) { return; }\n  }\n  if (!this.subscribeId) { return; }\n  // Note: Don't call this.removeAllListeners, allow client to handle that themselves\n  this.ros.off(this.name, this._messageCallback);\n  if(this.reconnect_on_close) {\n    this.ros.off('close', this.reconnectFunc);\n  }\n  this.emit('unsubscribe');\n  this.ros.callOnConnection({\n    op: 'unsubscribe',\n    id: this.subscribeId,\n    topic: this.name\n  });\n  this.subscribeId = null;\n};\n\n\n/**\n * Registers as a publisher for the topic.\n */\nTopic.prototype.advertise = function() {\n  if (this.isAdvertised) {\n    return;\n  }\n  this.advertiseId = 'advertise:' + this.name + ':' + (++this.ros.idCounter);\n  this.callForSubscribeAndAdvertise({\n    op: 'advertise',\n    id: this.advertiseId,\n    type: this.messageType,\n    topic: this.name,\n    latch: this.latch,\n    queue_size: this.queue_size\n  });\n  this.isAdvertised = true;\n\n  if(!this.reconnect_on_close) {\n    var that = this;\n    this.ros.on('close', function() {\n      that.isAdvertised = false;\n    });\n  }\n};\n\n/**\n * Unregisters as a publisher for the topic.\n */\nTopic.prototype.unadvertise = function() {\n  if (!this.isAdvertised) {\n    return;\n  }\n  if(this.reconnect_on_close) {\n    this.ros.off('close', this.reconnectFunc);\n  }\n  this.emit('unadvertise');\n  this.ros.callOnConnection({\n    op: 'unadvertise',\n    id: this.advertiseId,\n    topic: this.name\n  });\n  this.isAdvertised = false;\n};\n\n/**\n * Publish the message.\n *\n * @param message - A ROSLIB.Message object.\n */\nTopic.prototype.publish = function(message) {\n  if (!this.isAdvertised) {\n    this.advertise();\n  }\n\n  this.ros.idCounter++;\n  var call = {\n    op: 'publish',\n    id: 'publish:' + this.name + ':' + this.ros.idCounter,\n    topic: this.name,\n    msg: message,\n    latch: this.latch\n  };\n  this.ros.callOnConnection(call);\n};\n\nmodule.exports = Topic;\n\n},{\"./Message\":10,\"eventemitter2\":1}],18:[function(require,module,exports){\nvar mixin = require('../mixin');\n\nvar core = module.exports = {\n    Ros: require('./Ros'),\n    Topic: require('./Topic'),\n    Message: require('./Message'),\n    Param: require('./Param'),\n    Service: require('./Service'),\n    ServiceRequest: require('./ServiceRequest'),\n    ServiceResponse: require('./ServiceResponse')\n};\n\nmixin(core.Ros, ['Param', 'Service', 'Topic'], core);\n\n},{\"../mixin\":24,\"./Message\":10,\"./Param\":11,\"./Ros\":12,\"./Service\":13,\"./ServiceRequest\":14,\"./ServiceResponse\":15,\"./Topic\":17}],19:[function(require,module,exports){\n/**\n * @fileoverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar Vector3 = require('./Vector3');\nvar Quaternion = require('./Quaternion');\n\n/**\n * A Pose in 3D space. Values are copied into this object.\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * position - the Vector3 describing the position\n *   * orientation - the ROSLIB.Quaternion describing the orientation\n */\nfunction Pose(options) {\n  options = options || {};\n  // copy the values into this object if they exist\n  this.position = new Vector3(options.position);\n  this.orientation = new Quaternion(options.orientation);\n}\n\n/**\n * Apply a transform against this pose.\n *\n * @param tf the transform\n */\nPose.prototype.applyTransform = function(tf) {\n  this.position.multiplyQuaternion(tf.rotation);\n  this.position.add(tf.translation);\n  var tmp = tf.rotation.clone();\n  tmp.multiply(this.orientation);\n  this.orientation = tmp;\n};\n\n/**\n * Clone a copy of this pose.\n *\n * @returns the cloned pose\n */\nPose.prototype.clone = function() {\n  return new Pose(this);\n};\n\nmodule.exports = Pose;\n},{\"./Quaternion\":20,\"./Vector3\":22}],20:[function(require,module,exports){\n/**\n * @fileoverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\n/**\n * A Quaternion.\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * x - the x value\n *   * y - the y value\n *   * z - the z value\n *   * w - the w value\n */\nfunction Quaternion(options) {\n  options = options || {};\n  this.x = options.x || 0;\n  this.y = options.y || 0;\n  this.z = options.z || 0;\n  this.w = (typeof options.w === 'number') ? options.w : 1;\n}\n\n/**\n * Perform a conjugation on this quaternion.\n */\nQuaternion.prototype.conjugate = function() {\n  this.x *= -1;\n  this.y *= -1;\n  this.z *= -1;\n};\n\n/**\n * Return the norm of this quaternion.\n */\nQuaternion.prototype.norm = function() {\n  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n};\n\n/**\n * Perform a normalization on this quaternion.\n */\nQuaternion.prototype.normalize = function() {\n  var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n  if (l === 0) {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n    this.w = 1;\n  } else {\n    l = 1 / l;\n    this.x = this.x * l;\n    this.y = this.y * l;\n    this.z = this.z * l;\n    this.w = this.w * l;\n  }\n};\n\n/**\n * Convert this quaternion into its inverse.\n */\nQuaternion.prototype.invert = function() {\n  this.conjugate();\n  this.normalize();\n};\n\n/**\n * Set the values of this quaternion to the product of itself and the given quaternion.\n *\n * @param q the quaternion to multiply with\n */\nQuaternion.prototype.multiply = function(q) {\n  var newX = this.x * q.w + this.y * q.z - this.z * q.y + this.w * q.x;\n  var newY = -this.x * q.z + this.y * q.w + this.z * q.x + this.w * q.y;\n  var newZ = this.x * q.y - this.y * q.x + this.z * q.w + this.w * q.z;\n  var newW = -this.x * q.x - this.y * q.y - this.z * q.z + this.w * q.w;\n  this.x = newX;\n  this.y = newY;\n  this.z = newZ;\n  this.w = newW;\n};\n\n/**\n * Clone a copy of this quaternion.\n *\n * @returns the cloned quaternion\n */\nQuaternion.prototype.clone = function() {\n  return new Quaternion(this);\n};\n\nmodule.exports = Quaternion;\n\n},{}],21:[function(require,module,exports){\n/**\n * @fileoverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar Vector3 = require('./Vector3');\nvar Quaternion = require('./Quaternion');\n\n/**\n * A Transform in 3-space. Values are copied into this object.\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * translation - the Vector3 describing the translation\n *   * rotation - the ROSLIB.Quaternion describing the rotation\n */\nfunction Transform(options) {\n  options = options || {};\n  // Copy the values into this object if they exist\n  this.translation = new Vector3(options.translation);\n  this.rotation = new Quaternion(options.rotation);\n}\n\n/**\n * Clone a copy of this transform.\n *\n * @returns the cloned transform\n */\nTransform.prototype.clone = function() {\n  return new Transform(this);\n};\n\nmodule.exports = Transform;\n},{\"./Quaternion\":20,\"./Vector3\":22}],22:[function(require,module,exports){\n/**\n * @fileoverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\n/**\n * A 3D vector.\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * x - the x value\n *   * y - the y value\n *   * z - the z value\n */\nfunction Vector3(options) {\n  options = options || {};\n  this.x = options.x || 0;\n  this.y = options.y || 0;\n  this.z = options.z || 0;\n}\n\n/**\n * Set the values of this vector to the sum of itself and the given vector.\n *\n * @param v the vector to add with\n */\nVector3.prototype.add = function(v) {\n  this.x += v.x;\n  this.y += v.y;\n  this.z += v.z;\n};\n\n/**\n * Set the values of this vector to the difference of itself and the given vector.\n *\n * @param v the vector to subtract with\n */\nVector3.prototype.subtract = function(v) {\n  this.x -= v.x;\n  this.y -= v.y;\n  this.z -= v.z;\n};\n\n/**\n * Multiply the given Quaternion with this vector.\n *\n * @param q - the quaternion to multiply with\n */\nVector3.prototype.multiplyQuaternion = function(q) {\n  var ix = q.w * this.x + q.y * this.z - q.z * this.y;\n  var iy = q.w * this.y + q.z * this.x - q.x * this.z;\n  var iz = q.w * this.z + q.x * this.y - q.y * this.x;\n  var iw = -q.x * this.x - q.y * this.y - q.z * this.z;\n  this.x = ix * q.w + iw * -q.x + iy * -q.z - iz * -q.y;\n  this.y = iy * q.w + iw * -q.y + iz * -q.x - ix * -q.z;\n  this.z = iz * q.w + iw * -q.z + ix * -q.y - iy * -q.x;\n};\n\n/**\n * Clone a copy of this vector.\n *\n * @returns the cloned vector\n */\nVector3.prototype.clone = function() {\n  return new Vector3(this);\n};\n\nmodule.exports = Vector3;\n},{}],23:[function(require,module,exports){\nmodule.exports = {\n    Pose: require('./Pose'),\n    Quaternion: require('./Quaternion'),\n    Transform: require('./Transform'),\n    Vector3: require('./Vector3')\n};\n\n},{\"./Pose\":19,\"./Quaternion\":20,\"./Transform\":21,\"./Vector3\":22}],24:[function(require,module,exports){\n/**\n * Mixin a feature to the core/Ros prototype.\n * For example, mixin(Ros, ['Topic'], {Topic: <Topic>})\n * will add a topic bound to any Ros instances so a user\n * can call `var topic = ros.Topic({name: '/foo'});`\n *\n * @author Graeme Yeates - github.com/megawac\n */\nmodule.exports = function(Ros, classes, features) {\n    classes.forEach(function(className) {\n        var Class = features[className];\n        Ros.prototype[className] = function(options) {\n            options.ros = this;\n            return new Class(options);\n        };\n    });\n};\n\n},{}],25:[function(require,module,exports){\n/**\n * @fileoverview\n * @author David Gossow - dgossow@willowgarage.com\n */\n\nvar ActionClient = require('../actionlib/ActionClient');\nvar Goal = require('../actionlib/Goal');\n\nvar Service = require('../core/Service.js');\nvar ServiceRequest = require('../core/ServiceRequest.js');\n\nvar Transform = require('../math/Transform');\n\n/**\n * A TF Client that listens to TFs from tf2_web_republisher.\n *\n *  @constructor\n *  @param options - object with following keys:\n *   * ros - the ROSLIB.Ros connection handle\n *   * fixedFrame - the fixed frame, like /base_link\n *   * angularThres - the angular threshold for the TF republisher\n *   * transThres - the translation threshold for the TF republisher\n *   * rate - the rate for the TF republisher\n *   * updateDelay - the time (in ms) to wait after a new subscription\n *                   to update the TF republisher's list of TFs\n *   * topicTimeout - the timeout parameter for the TF republisher\n *   * serverName (optional) - the name of the tf2_web_republisher server\n *   * repubServiceName (optional) - the name of the republish_tfs service (non groovy compatibility mode only)\n *   \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t default: '/republish_tfs'\n */\nfunction TFClient(options) {\n  options = options || {};\n  this.ros = options.ros;\n  this.fixedFrame = options.fixedFrame || '/base_link';\n  this.angularThres = options.angularThres || 2.0;\n  this.transThres = options.transThres || 0.01;\n  this.rate = options.rate || 10.0;\n  this.updateDelay = options.updateDelay || 50;\n  var seconds = options.topicTimeout || 2.0;\n  var secs = Math.floor(seconds);\n  var nsecs = Math.floor((seconds - secs) * 1000000000);\n  this.topicTimeout = {\n    secs: secs,\n    nsecs: nsecs\n  };\n  this.serverName = options.serverName || '/tf2_web_republisher';\n  this.repubServiceName = options.repubServiceName || '/republish_tfs';\n\n  this.currentGoal = false;\n  this.currentTopic = false;\n  this.frameInfos = {};\n  this.republisherUpdateRequested = false;\n\n  // Create an Action client\n  this.actionClient = this.ros.ActionClient({\n    serverName : this.serverName,\n    actionName : 'tf2_web_republisher/TFSubscriptionAction',\n    omitStatus : true,\n    omitResult : true\n  });\n\n  // Create a Service client\n  this.serviceClient = this.ros.Service({\n    name: this.repubServiceName,\n    serviceType: 'tf2_web_republisher/RepublishTFs'\n  });\n}\n\n/**\n * Process the incoming TF message and send them out using the callback\n * functions.\n *\n * @param tf - the TF message from the server\n */\nTFClient.prototype.processTFArray = function(tf) {\n  var that = this;\n  tf.transforms.forEach(function(transform) {\n    var frameID = transform.child_frame_id;\n    if (frameID[0] === '/')\n    {\n      frameID = frameID.substring(1);\n    }\n    var info = this.frameInfos[frameID];\n    if (info) {\n      info.transform = new Transform({\n        translation : transform.transform.translation,\n        rotation : transform.transform.rotation\n      });\n      info.cbs.forEach(function(cb) {\n        cb(info.transform);\n      });\n    }\n  }, this);\n};\n\n/**\n * Create and send a new goal (or service request) to the tf2_web_republisher\n * based on the current list of TFs.\n */\nTFClient.prototype.updateGoal = function() {\n  var goalMessage = {\n    source_frames : Object.keys(this.frameInfos),\n    target_frame : this.fixedFrame,\n    angular_thres : this.angularThres,\n    trans_thres : this.transThres,\n    rate : this.rate\n  };\n\n  // if we're running in groovy compatibility mode (the default)\n  // then use the action interface to tf2_web_republisher\n  if(this.ros.groovyCompatibility) {\n    if (this.currentGoal) {\n      this.currentGoal.cancel();\n    }\n    this.currentGoal = new Goal({\n      actionClient : this.actionClient,\n      goalMessage : goalMessage\n    });\n\n    this.currentGoal.on('feedback', this.processTFArray.bind(this));\n    this.currentGoal.send();\n  }\n  else {\n    // otherwise, use the service interface\n    // The service interface has the same parameters as the action,\n    // plus the timeout\n    goalMessage.timeout = this.topicTimeout;\n    var request = new ServiceRequest(goalMessage);\n\n    this.serviceClient.callService(request, this.processResponse.bind(this));\n  }\n\n  this.republisherUpdateRequested = false;\n};\n\n/**\n * Process the service response and subscribe to the tf republisher\n * topic\n *\n * @param response the service response containing the topic name\n */\nTFClient.prototype.processResponse = function(response) {\n  // if we subscribed to a topic before, unsubscribe so\n  // the republisher stops publishing it\n  if (this.currentTopic) {\n    this.currentTopic.unsubscribe();\n  }\n\n  this.currentTopic = this.ros.Topic({\n    name: response.topic_name,\n    messageType: 'tf2_web_republisher/TFArray'\n  });\n  this.currentTopic.subscribe(this.processTFArray.bind(this));\n};\n\n/**\n * Subscribe to the given TF frame.\n *\n * @param frameID - the TF frame to subscribe to\n * @param callback - function with params:\n *   * transform - the transform data\n */\nTFClient.prototype.subscribe = function(frameID, callback) {\n  // remove leading slash, if it's there\n  if (frameID[0] === '/')\n  {\n    frameID = frameID.substring(1);\n  }\n  // if there is no callback registered for the given frame, create emtpy callback list\n  if (!this.frameInfos[frameID]) {\n    this.frameInfos[frameID] = {\n      cbs: []\n    };\n    if (!this.republisherUpdateRequested) {\n      setTimeout(this.updateGoal.bind(this), this.updateDelay);\n      this.republisherUpdateRequested = true;\n    }\n  }\n  // if we already have a transform, call back immediately\n  else if (this.frameInfos[frameID].transform) {\n    callback(this.frameInfos[frameID].transform);\n  }\n  this.frameInfos[frameID].cbs.push(callback);\n};\n\n/**\n * Unsubscribe from the given TF frame.\n *\n * @param frameID - the TF frame to unsubscribe from\n * @param callback - the callback function to remove\n */\nTFClient.prototype.unsubscribe = function(frameID, callback) {\n  // remove leading slash, if it's there\n  if (frameID[0] === '/')\n  {\n    frameID = frameID.substring(1);\n  }\n  var info = this.frameInfos[frameID];\n  for (var cbs = info && info.cbs || [], idx = cbs.length; idx--;) {\n    if (cbs[idx] === callback) {\n      cbs.splice(idx, 1);\n    }\n  }\n  if (!callback || cbs.length === 0) {\n    delete this.frameInfos[frameID];\n  }\n};\n\n/**\n * Unsubscribe and unadvertise all topics associated with this TFClient.\n */\nTFClient.prototype.dispose = function() {\n  this.actionClient.dispose();\n  if (this.currentTopic) {\n    this.currentTopic.unsubscribe();\n  }\n};\n\nmodule.exports = TFClient;\n\n},{\"../actionlib/ActionClient\":5,\"../actionlib/Goal\":7,\"../core/Service.js\":13,\"../core/ServiceRequest.js\":14,\"../math/Transform\":21}],26:[function(require,module,exports){\nvar Ros = require('../core/Ros');\nvar mixin = require('../mixin');\n\nvar tf = module.exports = {\n    TFClient: require('./TFClient')\n};\n\nmixin(Ros, ['TFClient'], tf);\n},{\"../core/Ros\":12,\"../mixin\":24,\"./TFClient\":25}],27:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Vector3 = require('../math/Vector3');\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Box element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfBox(options) {\n  this.dimension = null;\n  this.type = UrdfTypes.URDF_BOX;\n\n  // Parse the xml string\n  var xyz = options.xml.getAttribute('size').split(' ');\n  this.dimension = new Vector3({\n    x : parseFloat(xyz[0]),\n    y : parseFloat(xyz[1]),\n    z : parseFloat(xyz[2])\n  });\n}\n\nmodule.exports = UrdfBox;\n},{\"../math/Vector3\":22,\"./UrdfTypes\":36}],28:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\n/**\n * A Color element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfColor(options) {\n  // Parse the xml string\n  var rgba = options.xml.getAttribute('rgba').split(' ');\n  this.r = parseFloat(rgba[0]);\n  this.g = parseFloat(rgba[1]);\n  this.b = parseFloat(rgba[2]);\n  this.a = parseFloat(rgba[3]);\n}\n\nmodule.exports = UrdfColor;\n},{}],29:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Cylinder element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfCylinder(options) {\n  this.type = UrdfTypes.URDF_CYLINDER;\n  this.length = parseFloat(options.xml.getAttribute('length'));\n  this.radius = parseFloat(options.xml.getAttribute('radius'));\n}\n\nmodule.exports = UrdfCylinder;\n},{\"./UrdfTypes\":36}],30:[function(require,module,exports){\n/**\n * @fileOverview\n * @author David V. Lu!!  davidvlu@gmail.com\n */\n\n/**\n * A Joint element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfJoint(options) {\n  this.name = options.xml.getAttribute('name');\n  this.type = options.xml.getAttribute('type');\n\n  var parents = options.xml.getElementsByTagName('parent');\n  if(parents.length > 0) {\n    this.parent = parents[0].getAttribute('link');\n  }\n\n  var children = options.xml.getElementsByTagName('child');\n  if(children.length > 0) {\n    this.child = children[0].getAttribute('link');\n  }\n\n  var limits = options.xml.getElementsByTagName('limit');\n  if (limits.length > 0) {\n    this.minval = parseFloat( limits[0].getAttribute('lower') );\n    this.maxval = parseFloat( limits[0].getAttribute('upper') );\n  }\n}\n\nmodule.exports = UrdfJoint;\n\n},{}],31:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfVisual = require('./UrdfVisual');\n\n/**\n * A Link element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfLink(options) {\n  this.name = options.xml.getAttribute('name');\n  this.visuals = [];\n  var visuals = options.xml.getElementsByTagName('visual');\n\n  for( var i=0; i<visuals.length; i++ ) {\n    this.visuals.push( new UrdfVisual({\n      xml : visuals[i]\n    }) );\n  }\n}\n\nmodule.exports = UrdfLink;\n},{\"./UrdfVisual\":37}],32:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfColor = require('./UrdfColor');\n\n/**\n * A Material element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfMaterial(options) {\n  this.textureFilename = null;\n  this.color = null;\n\n  this.name = options.xml.getAttribute('name');\n\n  // Texture\n  var textures = options.xml.getElementsByTagName('texture');\n  if (textures.length > 0) {\n    this.textureFilename = textures[0].getAttribute('filename');\n  }\n\n  // Color\n  var colors = options.xml.getElementsByTagName('color');\n  if (colors.length > 0) {\n    // Parse the RBGA string\n    this.color = new UrdfColor({\n      xml : colors[0]\n    });\n  }\n}\n\nUrdfMaterial.prototype.isLink = function() {\n  return this.color === null && this.textureFilename === null;\n};\n\nvar assign = require('object-assign');\n\nUrdfMaterial.prototype.assign = function(obj) {\n    return assign(this, obj);\n};\n\nmodule.exports = UrdfMaterial;\n\n},{\"./UrdfColor\":28,\"object-assign\":2}],33:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Vector3 = require('../math/Vector3');\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Mesh element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfMesh(options) {\n  this.scale = null;\n\n  this.type = UrdfTypes.URDF_MESH;\n  this.filename = options.xml.getAttribute('filename');\n\n  // Check for a scale\n  var scale = options.xml.getAttribute('scale');\n  if (scale) {\n    // Get the XYZ\n    var xyz = scale.split(' ');\n    this.scale = new Vector3({\n      x : parseFloat(xyz[0]),\n      y : parseFloat(xyz[1]),\n      z : parseFloat(xyz[2])\n    });\n  }\n}\n\nmodule.exports = UrdfMesh;\n},{\"../math/Vector3\":22,\"./UrdfTypes\":36}],34:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfMaterial = require('./UrdfMaterial');\nvar UrdfLink = require('./UrdfLink');\nvar UrdfJoint = require('./UrdfJoint');\nvar DOMParser = require('xmldom').DOMParser;\n\n// See https://developer.mozilla.org/docs/XPathResult#Constants\nvar XPATH_FIRST_ORDERED_NODE_TYPE = 9;\n\n/**\n * A URDF Model can be used to parse a given URDF into the appropriate elements.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n *  * string - the XML element to parse as a string\n */\nfunction UrdfModel(options) {\n  options = options || {};\n  var xmlDoc = options.xml;\n  var string = options.string;\n  this.materials = {};\n  this.links = {};\n  this.joints = {};\n\n  // Check if we are using a string or an XML element\n  if (string) {\n    // Parse the string\n    var parser = new DOMParser();\n    xmlDoc = parser.parseFromString(string, 'text/xml');\n  }\n\n  // Initialize the model with the given XML node.\n  // Get the robot tag\n  var robotXml = xmlDoc.documentElement;\n\n  // Get the robot name\n  this.name = robotXml.getAttribute('name');\n\n  // Parse all the visual elements we need\n  for (var nodes = robotXml.childNodes, i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.tagName === 'material') {\n      var material = new UrdfMaterial({\n        xml : node\n      });\n      // Make sure this is unique\n      if (this.materials[material.name] !== void 0) {\n        if( this.materials[material.name].isLink() ) {\n          this.materials[material.name].assign( material );\n        } else {\n          console.warn('Material ' + material.name + 'is not unique.');\n        }\n      } else {\n        this.materials[material.name] = material;\n      }\n    } else if (node.tagName === 'link') {\n      var link = new UrdfLink({\n        xml : node\n      });\n      // Make sure this is unique\n      if (this.links[link.name] !== void 0) {\n        console.warn('Link ' + link.name + ' is not unique.');\n      } else {\n        // Check for a material\n        for( var j=0; j<link.visuals.length; j++ )\n        {\n          var mat = link.visuals[j].material;\n          if ( mat !== null ) {\n            if (this.materials[mat.name] !== void 0) {\n              link.visuals[j].material = this.materials[mat.name];\n            } else {\n              this.materials[mat.name] = mat;\n            }\n          }\n        }\n\n        // Add the link\n        this.links[link.name] = link;\n      }\n    } else if (node.tagName === 'joint') {\n      var joint = new UrdfJoint({\n        xml : node\n      });\n      this.joints[joint.name] = joint;\n    }\n  }\n}\n\nmodule.exports = UrdfModel;\n\n},{\"./UrdfJoint\":30,\"./UrdfLink\":31,\"./UrdfMaterial\":32,\"xmldom\":42}],35:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar UrdfTypes = require('./UrdfTypes');\n\n/**\n * A Sphere element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfSphere(options) {\n  this.type = UrdfTypes.URDF_SPHERE;\n  this.radius = parseFloat(options.xml.getAttribute('radius'));\n}\n\nmodule.exports = UrdfSphere;\n},{\"./UrdfTypes\":36}],36:[function(require,module,exports){\nmodule.exports = {\n\tURDF_SPHERE : 0,\n\tURDF_BOX : 1,\n\tURDF_CYLINDER : 2,\n\tURDF_MESH : 3\n};\n\n},{}],37:[function(require,module,exports){\n/**\n * @fileOverview\n * @author Benjamin Pitzer - ben.pitzer@gmail.com\n * @author Russell Toris - rctoris@wpi.edu\n */\n\nvar Pose = require('../math/Pose');\nvar Vector3 = require('../math/Vector3');\nvar Quaternion = require('../math/Quaternion');\n\nvar UrdfCylinder = require('./UrdfCylinder');\nvar UrdfBox = require('./UrdfBox');\nvar UrdfMaterial = require('./UrdfMaterial');\nvar UrdfMesh = require('./UrdfMesh');\nvar UrdfSphere = require('./UrdfSphere');\n\n/**\n * A Visual element in a URDF.\n *\n * @constructor\n * @param options - object with following keys:\n *  * xml - the XML element to parse\n */\nfunction UrdfVisual(options) {\n  var xml = options.xml;\n  this.origin = null;\n  this.geometry = null;\n  this.material = null;\n\n  // Origin\n  var origins = xml.getElementsByTagName('origin');\n  if (origins.length === 0) {\n    // use the identity as the default\n    this.origin = new Pose();\n  } else {\n    // Check the XYZ\n    var xyz = origins[0].getAttribute('xyz');\n    var position = new Vector3();\n    if (xyz) {\n      xyz = xyz.split(' ');\n      position = new Vector3({\n        x : parseFloat(xyz[0]),\n        y : parseFloat(xyz[1]),\n        z : parseFloat(xyz[2])\n      });\n    }\n\n    // Check the RPY\n    var rpy = origins[0].getAttribute('rpy');\n    var orientation = new Quaternion();\n    if (rpy) {\n      rpy = rpy.split(' ');\n      // Convert from RPY\n      var roll = parseFloat(rpy[0]);\n      var pitch = parseFloat(rpy[1]);\n      var yaw = parseFloat(rpy[2]);\n      var phi = roll / 2.0;\n      var the = pitch / 2.0;\n      var psi = yaw / 2.0;\n      var x = Math.sin(phi) * Math.cos(the) * Math.cos(psi) - Math.cos(phi) * Math.sin(the)\n          * Math.sin(psi);\n      var y = Math.cos(phi) * Math.sin(the) * Math.cos(psi) + Math.sin(phi) * Math.cos(the)\n          * Math.sin(psi);\n      var z = Math.cos(phi) * Math.cos(the) * Math.sin(psi) - Math.sin(phi) * Math.sin(the)\n          * Math.cos(psi);\n      var w = Math.cos(phi) * Math.cos(the) * Math.cos(psi) + Math.sin(phi) * Math.sin(the)\n          * Math.sin(psi);\n\n      orientation = new Quaternion({\n        x : x,\n        y : y,\n        z : z,\n        w : w\n      });\n      orientation.normalize();\n    }\n    this.origin = new Pose({\n      position : position,\n      orientation : orientation\n    });\n  }\n\n  // Geometry\n  var geoms = xml.getElementsByTagName('geometry');\n  if (geoms.length > 0) {\n    var geom = geoms[0];\n    var shape = null;\n    // Check for the shape\n    for (var i = 0; i < geom.childNodes.length; i++) {\n      var node = geom.childNodes[i];\n      if (node.nodeType === 1) {\n        shape = node;\n        break;\n      }\n    }\n    // Check the type\n    var type = shape.nodeName;\n    if (type === 'sphere') {\n      this.geometry = new UrdfSphere({\n        xml : shape\n      });\n    } else if (type === 'box') {\n      this.geometry = new UrdfBox({\n        xml : shape\n      });\n    } else if (type === 'cylinder') {\n      this.geometry = new UrdfCylinder({\n        xml : shape\n      });\n    } else if (type === 'mesh') {\n      this.geometry = new UrdfMesh({\n        xml : shape\n      });\n    } else {\n      console.warn('Unknown geometry type ' + type);\n    }\n  }\n\n  // Material\n  var materials = xml.getElementsByTagName('material');\n  if (materials.length > 0) {\n    this.material = new UrdfMaterial({\n      xml : materials[0]\n    });\n  }\n}\n\nmodule.exports = UrdfVisual;\n},{\"../math/Pose\":19,\"../math/Quaternion\":20,\"../math/Vector3\":22,\"./UrdfBox\":27,\"./UrdfCylinder\":29,\"./UrdfMaterial\":32,\"./UrdfMesh\":33,\"./UrdfSphere\":35}],38:[function(require,module,exports){\nmodule.exports = require('object-assign')({\n    UrdfBox: require('./UrdfBox'),\n    UrdfColor: require('./UrdfColor'),\n    UrdfCylinder: require('./UrdfCylinder'),\n    UrdfLink: require('./UrdfLink'),\n    UrdfMaterial: require('./UrdfMaterial'),\n    UrdfMesh: require('./UrdfMesh'),\n    UrdfModel: require('./UrdfModel'),\n    UrdfSphere: require('./UrdfSphere'),\n    UrdfVisual: require('./UrdfVisual')\n}, require('./UrdfTypes'));\n\n},{\"./UrdfBox\":27,\"./UrdfColor\":28,\"./UrdfCylinder\":29,\"./UrdfLink\":31,\"./UrdfMaterial\":32,\"./UrdfMesh\":33,\"./UrdfModel\":34,\"./UrdfSphere\":35,\"./UrdfTypes\":36,\"./UrdfVisual\":37,\"object-assign\":2}],39:[function(require,module,exports){\n(function (global){\nmodule.exports = global.WebSocket;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],40:[function(require,module,exports){\n/* global document */\nmodule.exports = function Canvas() {\n\treturn document.createElement('canvas');\n};\n},{}],41:[function(require,module,exports){\n(function (global){\n/**\n * @fileOverview\n * @author Graeme Yeates - github.com/megawac\n */\n\n'use strict';\n\nvar Canvas = require('canvas');\nvar Image = Canvas.Image || global.Image;\n\n/**\n * If a message was compressed as a PNG image (a compression hack since\n * gzipping over WebSockets * is not supported yet), this function places the\n * \"image\" in a canvas element then decodes the * \"image\" as a Base64 string.\n *\n * @private\n * @param data - object containing the PNG data.\n * @param callback - function with params:\n *   * data - the uncompressed data\n */\nfunction decompressPng(data, callback) {\n  // Uncompresses the data before sending it through (use image/canvas to do so).\n  var image = new Image();\n  // When the image loads, extracts the raw data (JSON message).\n  image.onload = function() {\n    // Creates a local canvas to draw on.\n    var canvas = new Canvas();\n    var context = canvas.getContext('2d');\n\n    // Sets width and height.\n    canvas.width = image.width;\n    canvas.height = image.height;\n\n    // Prevents anti-aliasing and loosing data\n    context.imageSmoothingEnabled = false;\n    context.webkitImageSmoothingEnabled = false;\n    context.mozImageSmoothingEnabled = false;\n\n    // Puts the data into the image.\n    context.drawImage(image, 0, 0);\n    // Grabs the raw, uncompressed data.\n    var imageData = context.getImageData(0, 0, image.width, image.height).data;\n\n    // Constructs the JSON.\n    var jsonData = '';\n    for (var i = 0; i < imageData.length; i += 4) {\n      // RGB\n      jsonData += String.fromCharCode(imageData[i], imageData[i + 1], imageData[i + 2]);\n    }\n    callback(JSON.parse(jsonData));\n  };\n  // Sends the image data to load.\n  image.src = 'data:image/png;base64,' + data;\n}\n\nmodule.exports = decompressPng;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"canvas\":40}],42:[function(require,module,exports){\n(function (global){\nexports.DOMImplementation = global.DOMImplementation;\nexports.XMLSerializer = global.XMLSerializer;\nexports.DOMParser = global.DOMParser;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[4]);\n"]}